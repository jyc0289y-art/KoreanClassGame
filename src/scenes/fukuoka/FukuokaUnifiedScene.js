import BaseWorldScene from '../BaseWorldScene.js';
import { gameState } from '../../systems/GameState.js';

// ============================================================
// FukuokaUnifiedScene v3 â€” ì‹¤ì œ ì§€ë¦¬ ê¸°ë°˜ í›„ì¿ ì˜¤ì¹´ í†µí•©ë§µ (9600Ã—7200)
//
//  ì‹¤ì œ ì§€ë„ë¥¼ ì°¸ì¡°í•œ í•˜ì¹´íƒ€ë§Œ ê³¡ì„  í•´ì•ˆ, ë‚˜ì¹´ê°€ì™€ ê³¡ì„ ,
//  ë¬´ë¡œë¯¸ê°•, ì˜¤í˜¸ë¦¬ê³µì›, 25ê°œ ëžœë“œë§ˆí¬, 5ê°œ êµ¬ì—­
//  ~640px/km (15km Ã— 11.25km)
// ============================================================

export default class FukuokaUnifiedScene extends BaseWorldScene {
  constructor() { super('FukuokaUnifiedScene'); }

  create() {
    this.worldWidth = 9600;
    this.worldHeight = 7200;
    gameState.setRegion('fukuoka');

    // â”€â”€ 5ê°œ êµ¬ì—­ ê²½ê³„ ì •ì˜ â”€â”€
    this._districts = [
      { id: 'tenjin', name: 'í…ì§„ å¤©ç¥ž', sub: 'ãƒ†ãƒ³ã‚¸ãƒ³ Â· Tenjin', color: '#FF8C00',
        x: 2600, y: 1800, w: 1800, h: 1800 },
      { id: 'hakata', name: 'í•˜ì¹´íƒ€ åšå¤š', sub: 'ãƒã‚«ã‚¿ Â· Hakata', color: '#CD5C5C',
        x: 5400, y: 1800, w: 2400, h: 2400 },
      { id: 'yakuin', name: 'ì•¼ì¿ ì¸ è–¬é™¢', sub: 'ãƒ¤ã‚¯ã‚¤ãƒ³ Â· Yakuin', color: '#2E8B57',
        x: 2600, y: 4000, w: 1800, h: 2200 },
      { id: 'nakasu', name: 'ë‚˜ì¹´ìŠ¤ ä¸­æ´²', sub: 'ãƒŠã‚«ã‚¹ Â· Nakasu', color: '#DA70D6',
        x: 4400, y: 2400, w: 800, h: 1600 },
      { id: 'seaside', name: 'ì‹œì‚¬ì´ë“œ ëª¨ëª¨ì¹˜', sub: 'ã‚·ãƒ¼ã‚µã‚¤ãƒ‰ Â· Seaside Momochi', color: '#4169E1',
        x: 1000, y: 1200, w: 1600, h: 1800 }
    ];
    this._lastWelcomeDistrict = null;

    // â”€â”€ ìŠ¤í° í¬ì¸íŠ¸ â”€â”€
    this.stationSpawnPoints = {
      yakuin:          { x: 3400, y: 5200 },
      tenjin:          { x: 3400, y: 2600 },
      tenjin_minami:   { x: 3400, y: 3400 },
      hakata:          { x: 6400, y: 2800 },
      nakasu:          { x: 4600, y: 3000 },
      seaside:         { x: 1800, y: 1800 },
      fukuoka_airport: { x: 6400, y: 2800 }
    };

    this.placeSpawnPoints = {
      YukoHouseScene:      { x: 3000, y: 5300 },
      AmiHouseScene:       { x: 3300, y: 5100 },
      RuiHouseScene:       { x: 3600, y: 5300 },
      BookstoreScene:      { x: 4000, y: 4700 },
      KoreanAcademyScene:  { x: 3000, y: 4700 }
    };

    this.createWorld({
      startX: 3400, startY: 5000,
      tiles: '__terrain__',
      npcs: [],
      buildings: []
    });

    // â”€â”€ ì§€í˜• ë Œë”ë§ (v3) â”€â”€
    this.drawTerrain();

    // â”€â”€ ë‚˜ì¹´ê°€ì™€ ë‹¤ë¦¬ â”€â”€
    this.drawBridges();

    // â”€â”€ 5ê°œ êµ¬ì—­ ê±´ë¬¼ + NPC + ì§€í•˜ì² ì—­ â”€â”€
    this.setupSeasideDistrict();
    this.setupTenjinDistrict();
    this.setupNakasuDistrict();
    this.setupHakataDistrict();
    this.setupYakuinDistrict();

    // â”€â”€ ì§€ì—­ ë¼ë²¨ â”€â”€
    this.addDistrictLabels();

    this.showSceneTitle('í›„ì¿ ì˜¤ì¹´', 'ç¦å²¡ Â· Fukuoka', 'Ch.0 í•œê¸€ë°˜ ì—ë¦¬ì–´ (ì‹¤ì œ ì§€ë¦¬)', '#88ff88');
    this.cameras.main.fadeIn(500, 0, 0, 0);
  }

  // â”€â”€ update: êµ¬ì—­ ì „í™˜ ê°ì§€ â”€â”€
  update() {
    super.update();
    if (!this.player || !this.player.body) return;
    const px = this.player.x, py = this.player.y;
    for (const d of this._districts) {
      if (px >= d.x && px <= d.x + d.w && py >= d.y && py <= d.y + d.h) {
        this.showDistrictWelcome(d.name, d.sub, d.color);
        break;
      }
    }
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ì§€í˜• ë Œë”ë§ v3 â€” ì‹¤ì œ ì§€ë¦¬ ê¸°ë°˜
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  drawTerrain() {
    this.createTerrainGraphics({
      baseColor: 0x7a9a6a,

      landUse: [
        // â”€â”€ í•´ì•ˆ ë…¹ì§€ â”€â”€
        { x: 0, y: 1050, w: 9600, h: 200, color: 0x9aaa8a, alpha: 0.6, border: false },
        // â”€â”€ ë…¸ì½”ë…¸ì‹œë§ˆ (ë°”ë‹¤ ìœ„ ì„¬) â”€â”€
        { x: 900, y: 350, w: 500, h: 350, color: 0x4a8a4a, alpha: 0.9, border: false },
        // â”€â”€ ì‹œì‚¬ì´ë“œ ëª¨ëª¨ì¹˜ â”€â”€
        { x: 1000, y: 1200, w: 1600, h: 1800, color: 0xa0b8c0, alpha: 1.0 },
        // â”€â”€ ì˜¤í˜¸ë¦¬ê³µì› ì£¼ë³€ ë…¹ì§€ â”€â”€
        { x: 2100, y: 2700, w: 1000, h: 800, color: 0x5a9a5a, alpha: 0.8, border: false },
        // â”€â”€ í…ì§„ ìƒì—… â”€â”€
        { x: 2600, y: 1800, w: 1800, h: 1800, color: 0xbcaa98, alpha: 1.0 },
        // â”€â”€ ë‚˜ì¹´ìŠ¤ í™˜ë½ê°€ â”€â”€
        { x: 4400, y: 2400, w: 800, h: 1600, color: 0xb8a0b0, alpha: 1.0 },
        // â”€â”€ í•˜ì¹´íƒ€ ì—­ì „ â”€â”€
        { x: 5400, y: 1800, w: 2400, h: 2400, color: 0xb0a8a0, alpha: 1.0 },
        // â”€â”€ ì•¼ì¿ ì¸ ì£¼ê±° â”€â”€
        { x: 2600, y: 4000, w: 1800, h: 2200, color: 0x90a880, alpha: 1.0 },
        // â”€â”€ í•˜ì¹´íƒ€ ë‚¨ë¶€ â”€â”€
        { x: 5400, y: 4200, w: 2400, h: 1800, color: 0x8a9a7a, alpha: 0.7, border: false },
        // â”€â”€ ë‚˜ì¹´ê°€ì™€ ì–‘ì•ˆ ì¼ë°˜ â”€â”€
        { x: 4200, y: 1100, w: 1200, h: 6100, color: 0x8a9a7a, alpha: 0.5, border: false },
        // â”€â”€ ë‚¨ë¶€ ì£¼íƒê°€ â”€â”€
        { x: 0, y: 5800, w: 9600, h: 1400, color: 0x88a078, alpha: 0.7, border: false },
        // â”€â”€ ë™ìª½ ì™¸ê³½ (ê³µí•­ ë°©ë©´) â”€â”€
        { x: 7800, y: 1200, w: 1800, h: 6000, color: 0x88a078, alpha: 0.6, border: false },
        // â”€â”€ ì„œìª½ ì™¸ê³½ â”€â”€
        { x: 0, y: 1200, w: 1000, h: 6000, color: 0x88a078, alpha: 0.6, border: false },
      ],

      water: [
        // â”€â”€ í•˜ì¹´íƒ€ë§Œ â€” ê¹Šì€ ë°”ë‹¤ â”€â”€
        {
          points: [
            [0,0],[9600,0],[9600,550],
            [9200,570],[8800,590],[8400,610],[8000,640],
            [7600,660],[7200,680],[6800,700],[6400,730],
            [6000,740],[5600,750],[5200,760],[4800,770],
            [4400,760],[4000,740],[3600,720],[3200,700],
            [2800,680],[2400,660],[2000,640],[1600,630],
            [1200,620],[800,610],[400,600],[0,590]
          ],
          color: 0x0a2040, alpha: 1.0
        },
        // â”€â”€ í•˜ì¹´íƒ€ë§Œ â€” ì–•ì€ ë°”ë‹¤ â”€â”€
        {
          points: [
            [0,590],[400,600],[800,610],[1200,620],
            [1600,630],[2000,640],[2400,660],[2800,680],
            [3200,700],[3600,720],[4000,740],[4400,760],
            [4800,770],[5200,760],[5600,750],[6000,740],
            [6400,730],[6800,700],[7200,680],[7600,660],
            [8000,640],[8400,610],[8800,590],[9200,570],[9600,550],
            [9600,900],[9200,920],[8800,940],[8400,960],
            [8000,990],[7600,1010],[7200,1030],[6800,1050],
            [6400,1080],[6000,1090],[5600,1100],[5200,1110],
            [4800,1120],[4400,1110],[4000,1090],[3600,1070],
            [3200,1050],[2800,1030],[2400,1010],[2000,990],
            [1600,980],[1200,970],[800,960],[400,950],[0,940]
          ],
          color: 0x1a4a7a, alpha: 1.0
        },
        // â”€â”€ í•˜ì¹´íƒ€ë§Œ â€” ëª¨ëž˜ì‚¬ìž¥/ì„œí”„ â”€â”€
        {
          points: [
            [0,940],[400,950],[800,960],[1200,970],
            [1600,980],[2000,990],[2400,1010],[2800,1030],
            [3200,1050],[3600,1070],[4000,1090],[4400,1110],
            [4800,1120],[5200,1110],[5600,1100],[6000,1090],
            [6400,1080],[6800,1050],[7200,1030],[7600,1010],
            [8000,990],[8400,960],[8800,940],[9200,920],[9600,900],
            [9600,950],[9200,970],[8800,990],[8400,1010],
            [8000,1040],[7600,1060],[7200,1080],[6800,1100],
            [6400,1130],[6000,1140],[5600,1150],[5200,1160],
            [4800,1170],[4400,1160],[4000,1140],[3600,1120],
            [3200,1100],[2800,1080],[2400,1060],[2000,1040],
            [1600,1030],[1200,1020],[800,1010],[400,1000],[0,990]
          ],
          color: 0xd4c4a0, alpha: 0.4
        },

        // â”€â”€ ë‚˜ì¹´ê°€ì™€ (é‚£ç‚å·) â€” ë©”ì¸ ë¦¬ë²„ â”€â”€
        {
          points: [
            [4900,1100],[4890,1600],[4870,2000],[4860,2400],
            [4850,2800],[4840,3200],[4850,3600],[4860,4000],
            [4880,4400],[4900,4800],[4920,5200],[4940,5600],
            [4960,6000],[4980,6400],[5000,6800],[5010,7200],
            [5170,7200],[5160,6800],[5140,6400],[5120,6000],
            [5100,5600],[5080,5200],[5060,4800],[5040,4400],
            [5020,4000],[5010,3600],[5000,3200],[5010,2800],
            [5020,2400],[5030,2000],[5050,1600],[5060,1100]
          ],
          color: 0x2a5a8a, alpha: 1.0,
          bank: { width: 15, color: 0x999999, alpha: 0.5 }
        },
        // ë‚˜ì¹´ê°€ì™€ ìˆ˜ë©´ í•˜ì´ë¼ì´íŠ¸
        {
          points: [
            [4920,1200],[4910,2400],[4900,3600],[4920,4800],[4960,6000],[5000,7200],
            [5140,7200],[5100,6000],[5060,4800],[5040,3600],[5050,2400],[5040,1200]
          ],
          color: 0x4a8aba, alpha: 0.2
        },

        // â”€â”€ ë¬´ë¡œë¯¸ê°• (å®¤è¦‹å·) â€” ì„œìª½ â”€â”€
        {
          points: [
            [1400,7200],[1410,6400],[1420,5600],[1430,4800],
            [1440,4000],[1450,3200],[1440,2400],[1420,1800],[1400,1100],
            [1500,1100],[1520,1800],[1540,2400],[1550,3200],
            [1540,4000],[1530,4800],[1520,5600],[1510,6400],[1500,7200]
          ],
          color: 0x2a5a8a, alpha: 0.9,
          bank: { width: 10, color: 0x7a8a5a, alpha: 0.4 }
        },

        // â”€â”€ ì˜¤í˜¸ë¦¬ê³µì› í˜¸ìˆ˜ (å¤§æ¿ å…¬åœ’) â”€â”€
        {
          points: [
            [2200,3100],[2250,2900],[2400,2800],[2600,2780],
            [2800,2800],[2950,2900],[3000,3100],
            [2950,3300],[2800,3400],[2600,3420],
            [2400,3400],[2250,3300]
          ],
          color: 0x2a6a9a, alpha: 0.9,
          bank: { width: 10, color: 0x5a8a5a, alpha: 0.5 }
        },
      ],

      roads: [
        // === ê°„ì„ ë„ë¡œ (major 160px) ===
        // ì‡¼ì™€ë„ë¦¬ æ˜­å’Œé€šã‚Š (E-W)
        { x: 200, y: 2920, w: 9200, h: 160, color: 0x606060, type: 'major' },
        // ì™€íƒ€ë‚˜ë² ë„ë¦¬ æ¸¡è¾ºé€šã‚Š (N-S)
        { x: 3320, y: 1100, w: 160, h: 6100, color: 0x606060, type: 'major' },
        // ë‹¤ì´í•˜ì¿ ë„ë¦¬ å¤§åšé€šã‚Š (N-S)
        { x: 6120, y: 1100, w: 160, h: 6100, color: 0x606060, type: 'major' },
        // ë©”ì´ì§€ë„ë¦¬ æ˜Žæ²»é€šã‚Š (E-W)
        { x: 2200, y: 2320, w: 5500, h: 160, color: 0x606060, type: 'major' },
        // êµ­ë„3í˜¸ì„  (N-S, ë™ìª½)
        { x: 7720, y: 1100, w: 160, h: 6100, color: 0x606060, type: 'major' },

        // === ì¤‘ë¡œ (medium 100px) ===
        // ížˆì—ë„ë¦¬ æ—¥æžé€šã‚Š (E-W)
        { x: 2600, y: 3550, w: 2200, h: 100, color: 0x686868, type: 'medium' },
        // í•˜ì¹´íƒ€ ì—í‚¤ë§ˆì—ë„ë¦¬ (N-S)
        { x: 5700, y: 1100, w: 100, h: 3200, color: 0x686868, type: 'medium' },
        // í…ì§„í‚¤íƒ€ë„ë¦¬ (E-W)
        { x: 2600, y: 1950, w: 1800, h: 100, color: 0x686868, type: 'medium' },
        // ëª¨ëª¨ì¹˜ë„ë¦¬ (E-W, í•´ì•ˆê°€)
        { x: 600, y: 1550, w: 2200, h: 100, color: 0x686868, type: 'medium' },
        // ë‹ˆì‹œí…Œì¸  ê³ ê°€ (E-W, í…ì§„)
        { x: 2800, y: 2720, w: 1600, h: 100, color: 0x686868, type: 'medium' },
        // í•˜ì¹´íƒ€ì—­ ë™ìª½ ë„ë¡œ (N-S)
        { x: 6700, y: 1100, w: 100, h: 3200, color: 0x686868, type: 'medium' },
        // í•˜ì¹´íƒ€ì—­ ì•ž ë„ë¡œ (E-W)
        { x: 5400, y: 2520, w: 2400, h: 100, color: 0x686868, type: 'medium' },

        // === ì†Œë¡œ (60px) ===
        // í…ì§„ ë‚´ë¶€
        { x: 2900, y: 1800, w: 60, h: 1800, color: 0x707070 },
        { x: 3800, y: 1800, w: 60, h: 1800, color: 0x707070 },
        { x: 2600, y: 2200, w: 1800, h: 60, color: 0x707070 },
        { x: 2600, y: 3200, w: 1800, h: 60, color: 0x707070 },
        // í•˜ì¹´íƒ€ ë‚´ë¶€
        { x: 5800, y: 1800, w: 60, h: 2400, color: 0x707070 },
        { x: 6400, y: 1800, w: 60, h: 2400, color: 0x707070 },
        { x: 7200, y: 1800, w: 60, h: 2400, color: 0x707070 },
        { x: 5400, y: 3400, w: 2400, h: 60, color: 0x707070 },
        // ì•¼ì¿ ì¸ ë‚´ë¶€
        { x: 3000, y: 4000, w: 60, h: 2200, color: 0x707070 },
        { x: 3800, y: 4000, w: 60, h: 2200, color: 0x707070 },
        { x: 2600, y: 4600, w: 1800, h: 60, color: 0x707070 },
        { x: 2600, y: 5200, w: 1800, h: 60, color: 0x707070 },
        { x: 2600, y: 5800, w: 1800, h: 60, color: 0x707070 },
        // ë‚˜ì¹´ìŠ¤ ë‚´ë¶€
        { x: 4600, y: 2400, w: 60, h: 1600, color: 0x707070 },
        // ì‹œì‚¬ì´ë“œ ë‚´ë¶€
        { x: 1600, y: 1200, w: 60, h: 1800, color: 0x707070 },
        { x: 2200, y: 1200, w: 60, h: 800, color: 0x707070 },
        { x: 1000, y: 2000, w: 1600, h: 60, color: 0x707070 },
        // ë‚¨ë¶€ ì—°ê²°
        { x: 4400, y: 4200, w: 60, h: 3000, color: 0x707070 },
      ],

      crosswalks: [
        { x: 3320, y: 2910, w: 160, dir: 'v' },
        { x: 6120, y: 2910, w: 160, dir: 'v' },
        { x: 3320, y: 2310, w: 160, dir: 'v' },
        { x: 5700, y: 2310, w: 100, dir: 'v' },
      ],

      blocks: [
        // ì‹œì‚¬ì´ë“œ ëª¨ëª¨ì¹˜
        { x: 1020, y: 1220, w: 560, h: 760, density: 'low',
          palette: [0xa0b0c0, 0x98a8b8, 0xb0c0d0] },
        { x: 1620, y: 1220, w: 560, h: 760, density: 'medium',
          palette: [0xa0b0c0, 0x98a8b8, 0xa8b8c8] },
        { x: 1020, y: 2020, w: 1160, h: 560, density: 'low',
          palette: [0x98a8b8, 0xa0b0c0] },

        // í…ì§„
        { x: 2620, y: 1820, w: 260, h: 360, density: 'high',
          palette: [0xb8a890, 0xc0b0a0, 0xa8a090, 0xb0a898] },
        { x: 2920, y: 1820, w: 860, h: 360, density: 'high',
          palette: [0xb8a890, 0xc0b0a0, 0xa8a090] },
        { x: 3820, y: 1820, w: 560, h: 360, density: 'high',
          palette: [0xb8a890, 0xc0b0a0] },
        { x: 2620, y: 2280, w: 1560, h: 400, density: 'high',
          palette: [0xb0a088, 0xa89880, 0xb8a890] },
        { x: 2620, y: 2760, w: 680, h: 440, density: 'medium',
          palette: [0xb0a088, 0xa89880] },
        { x: 3360, y: 2760, w: 1020, h: 440, density: 'medium',
          palette: [0xb0a088, 0xb8a890] },
        { x: 2620, y: 3280, w: 1760, h: 260, density: 'medium',
          palette: [0xa89880, 0xb0a088] },

        // ë‚˜ì¹´ìŠ¤
        { x: 4420, y: 2420, w: 760, h: 560, density: 'high',
          palette: [0xb098b0, 0xa890a0, 0xc0a8b8, 0xb8a0a8] },
        { x: 4420, y: 3040, w: 760, h: 540, density: 'medium',
          palette: [0xa890a0, 0xb098b0, 0xb8a0a8] },

        // í•˜ì¹´íƒ€
        { x: 5420, y: 1820, w: 360, h: 680, density: 'high',
          palette: [0xa8a0a0, 0xb0a8a0, 0xb8b0a8, 0xa0a098] },
        { x: 5820, y: 1820, w: 560, h: 680, density: 'high',
          palette: [0xa8a0a0, 0xb0a8a0, 0xb8b0a8] },
        { x: 6440, y: 1820, w: 240, h: 680, density: 'high',
          palette: [0xa8a0a0, 0xb0a8a0] },
        { x: 6720, y: 1820, w: 460, h: 680, density: 'medium',
          palette: [0xa8a0a0, 0xb0a8a0] },
        { x: 5420, y: 2640, w: 2360, h: 560, density: 'medium',
          palette: [0xa89898, 0xb0a0a0, 0xa8a0a0] },
        { x: 5420, y: 3260, w: 2360, h: 680, density: 'medium',
          palette: [0xa89898, 0xb0a0a0] },
        { x: 5420, y: 4000, w: 2360, h: 400, density: 'low',
          palette: [0xa09890, 0x989088] },

        // ì•¼ì¿ ì¸
        { x: 2620, y: 4020, w: 360, h: 560, density: 'low',
          palette: [0x90a080, 0x88a078, 0x98a888, 0x80a070] },
        { x: 3020, y: 4020, w: 760, h: 560, density: 'low',
          palette: [0x90a080, 0x88a078, 0x98a888] },
        { x: 3820, y: 4020, w: 560, h: 560, density: 'low',
          palette: [0x90a080, 0x88a078] },
        { x: 2620, y: 4680, w: 1760, h: 500, density: 'low',
          palette: [0x88a078, 0x80a070, 0x90a080] },
        { x: 2620, y: 5280, w: 1760, h: 500, density: 'low',
          palette: [0x88a078, 0x80a070] },
        { x: 2620, y: 5880, w: 1760, h: 300, density: 'low',
          palette: [0x85a075, 0x7a9868] },
      ],

      vegetation: [
        // ì˜¤í˜¸ë¦¬ ê³µì› ìˆ²
        { type: 'park', x: 2100, y: 2700, w: 1000, h: 800, density: 0.4, radiusRange: [12, 28] },
        // í…ì§„ì¤‘ì•™ê³µì›
        { type: 'park', x: 3700, y: 2900, w: 400, h: 300, density: 0.3, radiusRange: [10, 20] },
        // ì¼€ê³ ê³µì›
        { type: 'park', x: 3500, y: 2100, w: 300, h: 200, density: 0.3, radiusRange: [8, 18] },
        // ì‡¼ì™€ë„ë¦¬ ê°€ë¡œìˆ˜
        { type: 'streetTrees', x: 250, y: 2900, dir: 'h', length: 9100, spacing: 100, radius: 8 },
        { type: 'streetTrees', x: 250, y: 3100, dir: 'h', length: 9100, spacing: 100, radius: 8 },
        // ì™€íƒ€ë‚˜ë² ë„ë¦¬ ê°€ë¡œìˆ˜
        { type: 'streetTrees', x: 3300, y: 1150, dir: 'v', length: 5900, spacing: 100, radius: 8 },
        { type: 'streetTrees', x: 3500, y: 1150, dir: 'v', length: 5900, spacing: 100, radius: 8 },
        // ë‹¤ì´í•˜ì¿ ë„ë¦¬ ê°€ë¡œìˆ˜
        { type: 'streetTrees', x: 6100, y: 1150, dir: 'v', length: 5900, spacing: 100, radius: 8 },
        { type: 'streetTrees', x: 6300, y: 1150, dir: 'v', length: 5900, spacing: 100, radius: 8 },
        // ë©”ì´ì§€ë„ë¦¬ ê°€ë¡œìˆ˜
        { type: 'streetTrees', x: 2250, y: 2300, dir: 'h', length: 5400, spacing: 100, radius: 8 },
        { type: 'streetTrees', x: 2250, y: 2500, dir: 'h', length: 5400, spacing: 100, radius: 8 },
        // ë‚˜ì¹´ê°€ì™€ë³€ ë…¹ì§€
        { type: 'riverbank', x: 4880, y: 1150, dir: 'v', length: 6000 },
        { type: 'riverbank', x: 5080, y: 1150, dir: 'v', length: 6000 },
        // ë¬´ë¡œë¯¸ê°•ë³€ ë…¹ì§€
        { type: 'riverbank', x: 1380, y: 1150, dir: 'v', length: 6000 },
        { type: 'riverbank', x: 1520, y: 1150, dir: 'v', length: 6000 },
        // ì•¼ì¿ ì¸ ì†Œê·œëª¨ ë…¹ì§€
        { type: 'park', x: 2800, y: 5600, w: 600, h: 400, density: 0.25, radiusRange: [10, 22] },
        // í•´ì•ˆì„  ê³µì›
        { type: 'park', x: 1200, y: 1050, w: 800, h: 200, density: 0.3, radiusRange: [8, 18] },
        { type: 'park', x: 6000, y: 1100, w: 800, h: 200, density: 0.3, radiusRange: [8, 18] },
        // ì‹œì‚¬ì´ë“œ ëª¨ëª¨ì¹˜ í•´ë³€ ê³µì›
        { type: 'park', x: 1400, y: 1300, w: 600, h: 200, density: 0.3, radiusRange: [10, 22] },
      ],
    });
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ë‚˜ì¹´ê°€ì™€ ë‹¤ë¦¬ 5ê°œ
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  drawBridges() {
    const g = this.add.graphics().setDepth(0.5);

    // ë‚˜ì¹´ê°€ì™€ ì„œì•ˆ [Y, X] ë³´ê°„ìš©
    const nakaW = [
      [1100,4900],[1600,4890],[2000,4870],[2400,4860],
      [2800,4850],[3200,4840],[3600,4850],[4000,4860],
      [4400,4880],[4800,4900],[5200,4920],[5600,4940],
      [6000,4960],[6400,4980],[6800,5000],[7200,5010]
    ];
    const nakaE = [
      [1100,5060],[1600,5050],[2000,5030],[2400,5020],
      [2800,5010],[3200,5000],[3600,5010],[4000,5020],
      [4400,5040],[4800,5060],[5200,5080],[5600,5100],
      [6000,5120],[6400,5140],[6800,5160],[7200,5170]
    ];

    const iX = (pts, y) => {
      for (let i = 0; i < pts.length - 1; i++) {
        if (y >= pts[i][0] && y <= pts[i+1][0]) {
          const t = (y - pts[i][0]) / (pts[i+1][0] - pts[i][0]);
          return pts[i][1] + t * (pts[i+1][1] - pts[i][1]);
        }
      }
      return pts[pts.length - 1][1];
    };

    [
      { y: 1800, n: 'åšå¤šå¤§æ©‹', k: 'í•˜ì¹´íƒ€ëŒ€êµ' },
      { y: 2320, n: 'æ˜Žæ²»é€šã‚Šæ©‹', k: 'ë©”ì´ì§€ë„ë¦¬ë°”ì‹œ' },
      { y: 2920, n: 'æ˜­å’Œé€šã‚Šæ©‹', k: 'ì‡¼ì™€ë„ë¦¬ë°”ì‹œ' },
      { y: 3400, n: 'æ˜¥å‰æ©‹', k: 'í•˜ë£¨ìš”ì‹œë°”ì‹œ' },
      { y: 4200, n: 'ä½å‰æ©‹', k: 'ìŠ¤ë¯¸ìš”ì‹œë°”ì‹œ' },
    ].forEach(b => {
      const lX = iX(nakaW, b.y) - 25;
      const rX = iX(nakaE, b.y) + 25;
      const h = 70;
      // Shadow
      g.fillStyle(0x000000, 0.15);
      g.fillRect(lX + 4, b.y - h / 2 + 4, rX - lX, h);
      // Bridge deck
      g.fillStyle(0x707070, 0.9);
      g.fillRect(lX, b.y - h / 2, rX - lX, h);
      // Railings
      g.fillStyle(0x999999, 0.6);
      g.fillRect(lX, b.y - h / 2, rX - lX, 5);
      g.fillRect(lX, b.y + h / 2 - 5, rX - lX, 5);
      // Center dashes
      g.lineStyle(2, 0xffffff, 0.2);
      for (let dx = lX; dx < rX; dx += 25) {
        g.lineBetween(dx, b.y, Math.min(dx + 12, rX), b.y);
      }
      // Labels
      this.add.text((lX + rX) / 2, b.y - 10, b.n, {
        fontSize: '9px', color: '#ffffff', backgroundColor: '#00000088', padding: { x: 3, y: 1 }
      }).setOrigin(0.5).setDepth(3);
      this.add.text((lX + rX) / 2, b.y + 10, b.k, {
        fontSize: '8px', color: '#aaaaaa', backgroundColor: '#00000066', padding: { x: 3, y: 1 }
      }).setOrigin(0.5).setDepth(3);
    });
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ì‹œì‚¬ì´ë“œ ëª¨ëª¨ì¹˜ êµ¬ì—­ (NW: X:1000-2600, Y:1200-3000)
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  setupSeasideDistrict() {
    this.createNPCs([
      { x: 1800, y: 1800, texture: 'mission_npc',
        name_ko: 'í›„ì¿ ì˜¤ì¹´íƒ€ì›Œ ì•ˆë‚´ì›', name_ja: 'ç¦å²¡ã‚¿ãƒ¯ãƒ¼æ¡ˆå†…å“¡', hasMission: true,
        greeting_ko: 'í›„ì¿ ì˜¤ì¹´íƒ€ì›Œì— ì˜¤ì‹  ê±¸ í™˜ì˜í•´ìš”!\n234m ë†’ì´ì—ì„œ ì‹œë‚´ë¥¼ í•œëˆˆì—!',
        greeting_ja: 'ç¦å²¡ã‚¿ãƒ¯ãƒ¼ã¸ã‚ˆã†ã“ãï¼\n234mã®é«˜ã•ã‹ã‚‰å¸‚å†…ã‚’ä¸€æœ›ï¼' },
      { x: 1600, y: 1400, texture: 'shop',
        name_ko: 'ë¹„ì¹˜ ì•ˆë‚´ì›', name_ja: 'ãƒ“ãƒ¼ãƒæ¡ˆå†…å“¡',
        greeting_ko: 'ì‹œì‚¬ì´ë“œ ëª¨ëª¨ì¹˜ í•´ë³€ì´ì—ìš”!\nì—¬ê¸°ì„œ ë°”ë‹¤ë¥¼ ì¦ê¸°ì„¸ìš”~',
        greeting_ja: 'ã‚·ãƒ¼ã‚µã‚¤ãƒ‰ã‚‚ã‚‚ã¡æµ·æµœå…¬åœ’ã§ã™ï¼\nã“ã“ã§æµ·ã‚’æ¥½ã—ã‚“ã§ï½ž' },
    ]);
    this.createBuildings([
      { x: 1800, y: 1800, texture: 'building_tower', name_ko: 'í›„ì¿ ì˜¤ì¹´íƒ€ì›Œ / ç¦å²¡ã‚¿ãƒ¯ãƒ¼' },
      { x: 1400, y: 2200, texture: 'building_shop', name_ko: 'PayPayë” / PayPayãƒ‰ãƒ¼ãƒ ' },
      { x: 1500, y: 2000, texture: 'building_shop', name_ko: 'BOSS EÂ·ZO / ãƒœã‚¹ã‚¤ãƒ¼ã‚¾' },
      { x: 2000, y: 2400, texture: 'building_shop', name_ko: 'í›„ì¿ ì˜¤ì¹´ì‹œ ë°•ë¬¼ê´€ / ç¦å²¡å¸‚åšç‰©é¤¨' },
      { x: 1600, y: 1400, texture: 'building_shop', name_ko: 'ëª¨ëª¨ì¹˜ í•´ë³€ / ã‚‚ã‚‚ã¡ãƒ“ãƒ¼ãƒ' },
    ]);
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // í…ì§„ êµ¬ì—­ (W: X:2600-4400, Y:1800-3600)
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  setupTenjinDistrict() {
    this.createNPCs([
      { x: 3200, y: 2600, texture: 'shop',
        name_ko: 'í…ì§„ ì•ˆë‚´ì›', name_ja: 'å¤©ç¥žæ¡ˆå†…å“¡',
        greeting_ko: 'í…ì§„ì— ì˜¤ì‹  ê±¸ í™˜ì˜í•´ìš”!\nì‡¼í•‘ê³¼ ë¨¹ê±°ë¦¬ê°€ ê°€ë“í•œ ê±°ë¦¬ì˜ˆìš”.',
        greeting_ja: 'å¤©ç¥žã¸ã‚ˆã†ã“ãï¼\nã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã¨ã‚°ãƒ«ãƒ¡ãŒæº€è¼‰ã®è¡—ã§ã™ã€‚' },
      { x: 3400, y: 2400, texture: 'mission_npc',
        name_ko: 'ë°±í™”ì  ì§ì›', name_ja: 'ãƒ‡ãƒ‘ãƒ¼ãƒˆåº—å“¡', hasMission: true,
        greeting_ko: 'ë°±í™”ì ì— ì˜¤ì…¨ì–´ìš”?\ní•œêµ­ í™”ìž¥í’ˆë„ ìžˆì–´ìš”!',
        greeting_ja: 'ãƒ‡ãƒ‘ãƒ¼ãƒˆã¸ã‚ˆã†ã“ãï¼\néŸ“å›½ã‚³ã‚¹ãƒ¡ã‚‚ã‚ã‚Šã¾ã™ã‚ˆï¼' },
    ]);
    this.createBuildings([
      { x: 3200, y: 2600, texture: 'building_shop', name_ko: 'í…ì§„ ì§€í•˜ê°€ / å¤©ç¥žåœ°ä¸‹è¡—' },
      { x: 3400, y: 2400, texture: 'building_shop', name_ko: 'í…ì§„ì½”ì–´/ì†”ë¼ë¦¬ì•„ / å¤©ç¥žã‚³ã‚¢' },
      { x: 3600, y: 2800, texture: 'building_shop', name_ko: 'ì•„í¬ë¡œìŠ¤ í›„ì¿ ì˜¤ì¹´ / ã‚¢ã‚¯ãƒ­ã‚¹ç¦å²¡' },
      { x: 3600, y: 2200, texture: 'building_shop', name_ko: 'ì¼€ê³ ê³µì› / è­¦å›ºå…¬åœ’' },
      { x: 3800, y: 3000, texture: 'building_shop', name_ko: 'í…ì§„ì¤‘ì•™ê³µì› / å¤©ç¥žä¸­å¤®å…¬åœ’' },
      { x: 2400, y: 2900, texture: 'building_shop', name_ko: 'ì˜¤í˜¸ë¦¬ê³µì› / å¤§æ¿ å…¬åœ’' },
    ]);
    this.createSubwayEntrance(3400, 2600, 'FukuokaMetroScene', 'tenjin',
      'í…ì§„ì—­ ðŸš‡', 'å¤©ç¥žé§…');
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ë‚˜ì¹´ìŠ¤ êµ¬ì—­ (C: X:4400-5200, Y:2400-4000)
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  setupNakasuDistrict() {
    this.createNPCs([
      { x: 4600, y: 3000, texture: 'mission_npc',
        name_ko: 'ì•¼íƒ€ì´ ì‚¬ìž¥ë‹˜', name_ja: 'å±‹å°ã®è¦ªçˆ¶', hasMission: true,
        greeting_ko: 'ë‚˜ì¹´ìŠ¤ ì•¼íƒ€ì´ì— ì˜¤ì‹  ê±¸ í™˜ì˜í•´ìš”!\në¼ë©˜ í•œ ê·¸ë¦‡ ë“œì„¸ìš”~',
        greeting_ja: 'ä¸­æ´²å±‹å°ã¸ã‚ˆã†ã“ãï¼\nãƒ©ãƒ¼ãƒ¡ãƒ³ä¸€æ¯ã„ã‹ãŒã§ã™ã‹ï½ž' },
    ]);
    this.createBuildings([
      { x: 4600, y: 3000, texture: 'building_restaurant', name_ko: 'ë‚˜ì¹´ìŠ¤ ì•¼íƒ€ì´ / ä¸­æ´²å±‹å°' },
      { x: 4800, y: 2600, texture: 'building_shop', name_ko: 'í•˜ì¹´íƒ€ì¢Œ / åšå¤šåº§' },
      { x: 4800, y: 2800, texture: 'building_shop', name_ko: 'í•˜ì¹´íƒ€ ë¦¬ë²„ë ˆì¸ / ãƒªãƒãƒ¬ã‚¤ãƒ³' },
      { x: 4700, y: 3200, texture: 'building_shop', name_ko: 'ì•„ì‹œì•„ë¯¸ìˆ ê´€ / ã‚¢ã‚¸ã‚¢ç¾Žè¡“é¤¨' },
    ]);
    this.createSubwayEntrance(4700, 3000, 'FukuokaMetroScene', 'nakasu',
      'ë‚˜ì¹´ìŠ¤ì¹´ì™€ë°”íƒ€ì—­ ðŸš‡', 'ä¸­æ´²å·ç«¯é§…');
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // í•˜ì¹´íƒ€ êµ¬ì—­ (E: X:5400-7800, Y:1800-4200)
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  setupHakataDistrict() {
    this.createNPCs([
      { x: 5600, y: 3600, texture: 'shop',
        name_ko: 'ë¼ë©˜ ì‚¬ìž¥ë‹˜', name_ja: 'ãƒ©ãƒ¼ãƒ¡ãƒ³åº—ä¸»',
        greeting_ko: 'í•˜ì¹´íƒ€ ë¼ë©˜ ë“œì…”ë³´ì„¸ìš”!\nëˆì½”ì¸  ë¼ë©˜ì´ ì œì¼ ìœ ëª…í•´ìš”~',
        greeting_ja: 'åšå¤šãƒ©ãƒ¼ãƒ¡ãƒ³ã„ã‹ãŒã§ã™ã‹ï¼\nè±šéª¨ãƒ©ãƒ¼ãƒ¡ãƒ³ãŒä¸€ç•ªæœ‰åã§ã™ã‚ˆï½ž' },
      { x: 6400, y: 2800, texture: 'mission_npc',
        name_ko: 'í•˜ì¹´íƒ€ì—­ ì•ˆë‚´ì›', name_ja: 'åšå¤šé§…æ¡ˆå†…å“¡', hasMission: true,
        greeting_ko: 'í•˜ì¹´íƒ€ì—­ì— ì˜¤ì‹  ê±¸ í™˜ì˜í•©ë‹ˆë‹¤!\nì‡¼í•‘ëª°ê³¼ ë¨¹ê±°ë¦¬ê°€ ë§Žì•„ìš”.',
        greeting_ja: 'åšå¤šé§…ã¸ã‚ˆã†ã“ãï¼\nã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ«ã¨ã‚°ãƒ«ãƒ¡ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚' },
    ]);
    this.createBuildings([
      { x: 6400, y: 2800, texture: 'building_station', name_ko: 'í•˜ì¹´íƒ€ì—­ / åšå¤šé§…' },
      { x: 6600, y: 2800, texture: 'building_shop', name_ko: 'í•˜ì¹´íƒ€ì—­ ë™ìª½ ê´‘ìž¥ / åšå¤šé§…æ±' },
      { x: 5400, y: 3600, texture: 'building_shop', name_ko: 'ìºë„ì‹œí‹° í•˜ì¹´íƒ€ / ã‚­ãƒ£ãƒŠãƒ«ã‚·ãƒ†ã‚£' },
      { x: 5600, y: 3600, texture: 'building_restaurant', name_ko: 'ë¼ë©˜ìŠ¤íƒ€ë””ì›€ / ãƒ©ãƒ¼ãƒ¡ãƒ³ã‚¹ã‚¿ã‚¸ã‚¢ãƒ ' },
      { x: 5200, y: 3200, texture: 'building_shop', name_ko: 'ì¿ ì‹œë‹¤ì‹ ì‚¬ / æ«›ç”°ç¥žç¤¾' },
      { x: 5400, y: 3000, texture: 'building_shop', name_ko: 'í•˜ì¹´íƒ€ ë§ˆì¹˜ì•¼ / åšå¤šç”ºå®¶' },
      { x: 6500, y: 1400, texture: 'building_shop', name_ko: 'ë§ˆë¦°ë©”ì„¸ í›„ì¿ ì˜¤ì¹´ / ãƒžãƒªãƒ³ãƒ¡ãƒƒã‚»' },
      { x: 6800, y: 1600, texture: 'building_tower', name_ko: 'í•˜ì¹´íƒ€ í¬íŠ¸íƒ€ì›Œ / åšå¤šãƒãƒ¼ãƒˆã‚¿ãƒ¯ãƒ¼' },
    ]);
    this.createSubwayEntrance(6400, 3000, 'FukuokaMetroScene', 'hakata',
      'í•˜ì¹´íƒ€ì—­ ðŸš‡', 'åšå¤šé§…');
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ì•¼ì¿ ì¸ êµ¬ì—­ (SW: X:2600-4400, Y:4000-6200)
  //   ê²Œìž„ ì‹œìž‘ ì§€ì  â€” ìºë¦­í„° ì§‘ + í•™ì› + ì„œì 
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  setupYakuinDistrict() {
    this.createNPCs([
      { x: 3300, y: 5000, texture: 'ami',
        name_ko: 'ì•„ë¯¸', name_ja: 'ã‚¢ãƒŸ', hasDialogue: true,
        greeting_ko: 'ìœ ì½”ì•¼! í•œê¸€ ê³µë¶€ ì‹œìž‘í•˜ìž!\nBTX ê°€ì‚¬ ì½ê³  ì‹¶ì§€ ì•Šì•„?',
        greeting_ja: 'ãƒ¦ã‚³ï¼ãƒãƒ³ã‚°ãƒ«å‹‰å¼·å§‹ã‚ã‚ˆã†ï¼\nBTXã®æ­Œè©žèª­ã¿ãŸããªã„ï¼Ÿ' },
      { x: 3600, y: 5100, texture: 'rui',
        name_ko: 'ë£¨ì´', name_ja: 'ãƒ«ã‚¤', hasDialogue: true,
        greeting_ko: 'í•œêµ­ì–´ êµìž¬ ìƒ€ì–´!\nê°™ì´ ê³µë¶€í• ê¹Œ?',
        greeting_ja: 'éŸ“å›½èªžãƒ†ã‚­ã‚¹ãƒˆè²·ã£ãŸã‚ˆï¼\nä¸€ç·’ã«å‹‰å¼·ã™ã‚‹ï¼Ÿ' },
      { x: 3000, y: 4500, texture: 'mission_npc',
        name_ko: 'í•œêµ­ì–´ ì„ ìƒë‹˜', name_ja: 'éŸ“å›½èªžã®å…ˆç”Ÿ', hasMission: true,
        greeting_ko: 'ì•ˆë…•í•˜ì„¸ìš”! í•œê¸€ì„ ë°°ì›Œ ë³¼ê¹Œìš”?\nìžìŒê³¼ ëª¨ìŒë¶€í„° ì‹œìž‘í•´ìš”!',
        greeting_ja: 'ã“ã‚“ã«ã¡ã¯ï¼ãƒãƒ³ã‚°ãƒ«ã‚’å­¦ã‚“ã§ã¿ã¾ã—ã‚‡ã†ã‹ï¼Ÿ\nå­éŸ³ã¨æ¯éŸ³ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ï¼' },
      { x: 4000, y: 4500, texture: 'mission_npc',
        name_ko: 'ì„œì  ì§ì›', name_ja: 'æ›¸åº—å“¡', hasMission: true,
        greeting_ko: 'í•œêµ­ì–´ êµìž¬ ì°¾ìœ¼ì„¸ìš”?\nì´ˆë³´ìžìš© êµìž¬ê°€ ì—¬ê¸° ìžˆì–´ìš”!',
        greeting_ja: 'éŸ“å›½èªžãƒ†ã‚­ã‚¹ãƒˆã‚’ãŠæŽ¢ã—ã§ã™ã‹ï¼Ÿ\nåˆå¿ƒè€…ç”¨ãƒ†ã‚­ã‚¹ãƒˆã¯ã“ã¡ã‚‰ã§ã™ï¼' },
      { x: 3400, y: 4800, texture: 'shop',
        name_ko: 'íŽ¸ì˜ì  ì ì›', name_ja: 'ã‚³ãƒ³ãƒ“ãƒ‹åº—å“¡',
        greeting_ko: 'ì–´ì„œì˜¤ì„¸ìš”! í•„ìš”í•˜ì‹  ê±° ìžˆìœ¼ì„¸ìš”?',
        greeting_ja: 'ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã›ï¼ä½•ã‹ãŠæŽ¢ã—ã§ã™ã‹ï¼Ÿ' },
    ]);

    // ì§„ìž… ê°€ëŠ¥ ê±´ë¬¼
    this.createEnterableBuilding(3000, 5200, 'YukoHouseScene', {
      texture: 'building_house', name_ko: 'ìœ ì½” ì§‘', name_ja: 'ãƒ¦ã‚³ã®å®¶'
    });
    this.createEnterableBuilding(3300, 5000, 'AmiHouseScene', {
      texture: 'building_house', name_ko: 'ì•„ë¯¸ ì§‘', name_ja: 'ã‚¢ãƒŸã®å®¶'
    });
    this.createEnterableBuilding(3600, 5200, 'RuiHouseScene', {
      texture: 'building_house', name_ko: 'ë£¨ì´ ì§‘', name_ja: 'ãƒ«ã‚¤ã®å®¶'
    });
    this.createEnterableBuilding(4000, 4600, 'BookstoreScene', {
      texture: 'building_shop', name_ko: 'ì„œì ', name_ja: 'æ›¸åº—ï¼ˆç´€é‡Žä¸¸ï¼‰'
    });
    this.createEnterableBuilding(3000, 4600, 'KoreanAcademyScene', {
      texture: 'building_academy', name_ko: 'í•œêµ­ì–´ í•™ì›', name_ja: 'éŸ“å›½èªžæ•™å®¤'
    });

    this.createBuildings([
      { x: 3400, y: 4700, texture: 'building_shop', name_ko: 'íŽ¸ì˜ì  / ã‚³ãƒ³ãƒ“ãƒ‹' },
    ]);

    this.createSubwayEntrance(3400, 5200, 'FukuokaMetroScene', 'yakuin',
      'ì•¼ì¿ ì¸ì—­ ðŸš‡', 'è–¬é™¢é§…');
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ë¼ë²¨ ì‹œìŠ¤í…œ â€” êµ¬ì—­, ìˆ˜ì—­, ë„ë¡œ í‘œì§€íŒ
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  addDistrictLabels() {
    const s = this.uiScale;
    const ds = (c) => ({ fontSize: `${Math.round(16*s)}px`, color: c, fontStyle: 'bold', backgroundColor: '#000000aa', padding: { x: 10, y: 5 } });
    const ss = (c) => ({ fontSize: `${Math.round(10*s)}px`, color: c, backgroundColor: '#00000066', padding: { x: 6, y: 3 } });
    const st = { fontSize: `${Math.round(9*s)}px`, color: '#ffffff', backgroundColor: '#2255aa', padding: { x: 6, y: 3 } };

    // êµ¬ì—­ ë¼ë²¨
    [[1800,1260,4],[3500,1860,0],[4800,2460,3],[6600,1860,1],[3500,4060,2]]
    .forEach(([x,y,i]) => {
      const d = this._districts[i];
      this.add.text(x, y, d.name, ds(d.color)).setOrigin(0.5).setDepth(3);
      this.add.text(x, y + 30, d.sub, ss(d.color)).setOrigin(0.5).setDepth(3);
    });

    // í•˜ì¹´íƒ€ë§Œ ë¼ë²¨
    this.add.text(4800, 400, 'â”€â”€ í•˜ì¹´íƒ€ë§Œ Â· åšå¤šæ¹¾ Â· Hakata Bay â”€â”€', {
      fontSize: `${Math.round(12*s)}px`, color: '#5588bb',
      fontStyle: 'italic', backgroundColor: '#00000066', padding: { x: 10, y: 4 }
    }).setOrigin(0.5).setDepth(3);

    // ë…¸ì½”ë…¸ì‹œë§ˆ ë¼ë²¨
    this.add.text(1150, 500, 'ðŸï¸ èƒ½å¤å³¶ / ë…¸ì½”ë…¸ì‹œë§ˆ', {
      fontSize: `${Math.round(9*s)}px`, color: '#3a7a3a',
      backgroundColor: '#00000066', padding: { x: 4, y: 2 }
    }).setOrigin(0.5).setDepth(3);

    // ìˆ˜ì—­ ë¼ë²¨
    [[4950,2500,'é‚£ç‚å· Â· ë‚˜ì¹´ê°€ì™€'],[1450,3500,'å®¤è¦‹å· Â· ë¬´ë¡œë¯¸ê°•'],[2600,3050,'å¤§æ¿ å…¬åœ’ Â· ì˜¤í˜¸ë¦¬ê³µì›']].forEach(([x,y,t]) => {
      this.add.text(x, y, t, {
        fontSize: `${Math.round(10*s)}px`, color: '#5588bb',
        fontStyle: 'italic', backgroundColor: '#00000066', padding: { x: 4, y: 2 }
      }).setOrigin(0.5).setDepth(3);
    });

    // ì‚°/ì™¸ê³½ ë¼ë²¨
    this.add.text(8500, 5500, 'â†’ ë‹¤ìžì´í›„ / å¤ªå®°åºœæ–¹é¢', {
      fontSize: `${Math.round(10*s)}px`, color: '#6a6a6a',
      fontStyle: 'italic', backgroundColor: '#00000044', padding: { x: 6, y: 3 }
    }).setOrigin(0.5).setDepth(3);

    // ê±°ë¦¬ í‘œì§€íŒ
    [[2000,2910,'æ˜­å’Œé€šã‚Š / ì‡¼ì™€ë„ë¦¬ â†’'],[7500,2910,'â† æ˜­å’Œé€šã‚Š / ì‡¼ì™€ë„ë¦¬'],
     [3450,1500,'â†‘ æ¸¡è¾ºé€šã‚Š / ì™€íƒ€ë‚˜ë² ë„ë¦¬'],[6250,1500,'â†‘ å¤§åšé€šã‚Š / ë‹¤ì´í•˜ì¿ ë„ë¦¬'],
     [3200,2310,'æ˜Žæ²»é€šã‚Š / ë©”ì´ì§€ë„ë¦¬ â†’'],[6500,2310,'â† æ˜Žæ²»é€šã‚Š / ë©”ì´ì§€ë„ë¦¬'],
     [7850,2000,'â†‘ å›½é“3å· / êµ­ë„3í˜¸'],[5830,1500,'â†‘ é§…å‰é€šã‚Š / ì—í‚¤ë§ˆì—ë„ë¦¬'],
     [1500,1540,'â† ãƒ¢ãƒ¢ãƒé€šã‚Š / ëª¨ëª¨ì¹˜ë„ë¦¬'],[3200,3540,'æ—¥æžé€šã‚Š / ížˆì—ë„ë¦¬ â†’']
    ].forEach(([x,y,t]) => {
      this.add.text(x, y, t, st).setOrigin(0.5).setDepth(15);
    });
  }
}
