# 맵 시스템 기획서 — 실제 지리 기반 3계층 맵 구조

## Context

현재 게임은 FukuokaScene(1600×1200)과 IncheonScene(1600×1200) 두 개의 단일 월드 맵만 존재하며, 포털로 직접 이동하는 단순 구조. 교재 스토리라인에 등장하는 수십 개의 실제 장소(명동, 강남, 홍대, 성수동, 인천공항 내부 등)를 게임 내에서 체험할 수 없음.

**목표**: 실제 지도 기반으로 3계층(국제맵→광역맵→지역맵/장소맵) 맵 시스템을 구축하여, 교재의 모든 스토리 장소를 게임 내에서 자연스럽게 이동·탐험할 수 있게 함.

---

## 1. 맵 계층 구조 (3 Layers)

```
┌─────────────────────────────────────────────────────┐
│  Layer 1: 국제맵 (InternationalMapScene)            │
│  ─ UI 선택 화면: 세계지도에서 공항 선택              │
│  ─ 후쿠오카공항 ↔ 인천공항                          │
└──────────────────────┬──────────────────────────────┘
                       │ 공항 내 국제선 탑승구역 진입
┌──────────────────────┴──────────────────────────────┐
│  Layer 2: 광역맵 (MetroMapScene)                    │
│  ─ UI 선택 화면: 지하철 노선도에서 역 선택           │
│  ─ 후쿠오카 지하철 / 서울 지하철                    │
└──────────────────────┬──────────────────────────────┘
                       │ 역 선택 → 해당 지역맵 이동
┌──────────────────────┴──────────────────────────────┐
│  Layer 3a: 지역맵 (BaseWorldScene 상속)             │
│  ─ 걸어다니는 2D 월드 (조이스틱/키보드)              │
│  ─ NPC, 건물, 지하철역 입구, 장소 입구 포함          │
├─────────────────────────────────────────────────────┤
│  Layer 3b: 장소맵 (BasePlaceScene 상속)             │
│  ─ 실내/특정 장소의 작은 워커블 맵 (800×600 등)     │
│  ─ 아미집, 서점, 학원, 영화관, 카페 등              │
└─────────────────────────────────────────────────────┘
```

**이동 흐름 예시:**
1. 후쿠오카 야쿠인 지역맵 → 지하철역 진입 → 후쿠오카 광역맵 → 후쿠오카공항역 선택
2. 후쿠오카공항 지역맵 → 국제선 탑승구역 진입 → 국제맵
3. 국제맵에서 인천공항 선택 → 인천공항 지역맵(도착층)
4. 인천공항 → 공항철도역 진입 → 서울 광역맵 → 명동역 선택
5. 명동 지역맵 → 올리브영 건물 상호작용 → 올리브영 장소맵

---

## 2. 실제 지리 기반 맵 설계

### 2-A. 후쿠오카 (福岡)

**실제 지리 좌표 (경도 기준 서→동 배치):**

| 장소 | 위도 | 경도 | 게임 내 위치 |
|------|------|------|-------------|
| 메이노하마 | 33.590 | 130.340 | 맵 좌측 끝 |
| 오호리공원 | 33.586 | 130.382 | 좌측-중앙 |
| 텐진역 (중심) | 33.591 | 130.399 | 중앙 |
| 야쿠인 | 33.582 | 130.397 | 중앙 남쪽 |
| 나카스 | 33.593 | 130.408 | 중앙-동쪽 |
| 하카타역 | 33.590 | 130.421 | 동쪽 |
| 후쿠오카공항 | 33.586 | 130.451 | 맵 우측 끝 |

**후쿠오카 지하철 3개 노선:**

```
[공항선/空港線] (주황) ─── 서→동 횡단:
메이노하마→무로미→후지사키→니시진→토진마치→오호리코엔→
아카사카→텐진→나카스카와바타→기온→하카타→히가시히에→후쿠오카공항

[하코자키선/箱崎線] (파랑) ─── 나카스에서 북동쪽:
나카스카와바타→고후쿠마치→치요켄초구치→마이다시→하코자키미야마에→하코자키큐다이마에→카이즈카

[나나쿠마선/七隈線] (녹색) ─── 남서→중앙 종단:
하시모토→...→나나쿠마→...→야쿠인오도리→야쿠인→와타나베도리→텐진미나미→하카타
```

**Ch.0 주요 장소 배치 (야쿠인~텐진 구역):**
- 유코 집, 아미 집, 루이 집: 야쿠인 주택가 (젊은 여성 거주 인기 지역)
- 한국어 학원 (K Village Tenjin): 텐진역 부근
- 서점 (키노쿠니야): 하카타역 부근
- 편의점: 야쿠인~텐진 사이
- 후쿠오카공항: 공항선 종점 (국제선 터미널)

### 2-B. 후쿠오카공항 (福岡空港)

**국제선 터미널 (2025년 3월 리뉴얼 그랜드오픈):**

| 층 | 용도 | 게임 내 주요 시설 |
|----|------|-----------------|
| **1F** | 도착층 (入国) | 도착로비, 안내소, 환전소, 편의점, 버스터미널 |
| **2F** | 연결통로 | 국내선↔국제선 연결 |
| **3F** | 출발층 (出国) | 체크인카운터, 보안검색, 면세점(6,000㎡), 푸드코트, 탑승게이트 |

**국내선 터미널:**

| 층 | 용도 |
|----|------|
| **B2F** | 지하철 후쿠오카공항역 (공항선) |
| **B1F** | 보안실·연결통로 |
| **1F** | 체크인카운터, 도착로비 |
| **2F** | 보안검색, 출발로비 |
| **3F** | 레스토랑, 도착 콘코스 |
| **4F** | 전망데크 |

**게임 맵 구성:**
- `FukuokaAirportScene` (지역맵): 국제선 터미널 1F 도착층 기준
- 3F 출발층의 국제선 탑승구역 → 국제맵(InternationalMapScene)으로 전환
- B2F 지하철역 → 후쿠오카 광역맵(MetroMapScene)으로 전환

### 2-C. 인천공항 (仁川國際空港)

**공식 홈페이지 층별 지도 기반 구성:**

**제1여객터미널:**

| 층 | 용도 | 게임 내 주요 시설/NPC |
|----|------|---------------------|
| **B1F** | 교통센터 | 공항철도 대합실, 환전소 → 광역맵 진입점 |
| **1F** | 도착층 (入国) | 입국장(A~F게이트), 로밍센터, 환전소, 안내데스크, 버스매표소 |
| **2F** | 물품보관 | 물품보관소 |
| **3F** | 출발층 (出国) | 체크인(A~N카운터), 출국심사, 면세점, 안내데스크, 터미널간 셔틀 |
| **4F** | 면세구역/라운지 | 면세점, 수면존, 샤워실 |

**제2여객터미널:**

| 층 | 용도 | 게임 내 주요 시설/NPC |
|----|------|---------------------|
| **B2F** | 교통센터 | 공항철도역 (인천공항2터미널역) |
| **B1F** | 교통센터 | 버스터미널, 식당가, 렌터카 |
| **1F** | 도착층 | 입국장, 택시, 환전소, 로밍, 편의점 |
| **2F** | 행정/문화 | 한국전통문화센터, 정부종합행정센터 |
| **3F** | 출발층 | 체크인, 면세점, 서점, 약국 |
| **4F** | 식당가/라운지 | 레스토랑, 면세품 인도장 |

**게임 맵 구성:**
- `IncheonAirportScene` (지역맵): T1 1F 도착층 기준 (교재 Ch.1 시작점)
- 1F에서 NPC(이현정-입국심사, 환전소, T-money 판매) 배치
- B1F 공항철도역 → 서울 광역맵(MetroMapScene)으로 전환
- 3F 출발층 국제선 탑승구역 → 국제맵(InternationalMapScene)으로 전환

### 2-D. 서울 (Seoul)

**실제 지리 좌표 (한강 기준 강북/강남):**

```
                        N (북)
                        │
  [망원]──[홍대]──[서울역]──[명동/남산]──[성수]
    │       │       │          │           │
    │    [신촌]  [하이커]    [종각]         │
    │   [이대/연세]                        │
    │                                     │
════════════ 한 강 (漢江) ════════════════
    │                  │                  │
    │           [강남역]            [코엑스/삼성]
    │
  [서울대/관악]

  서쪽 48km: 인천공항 (AREX 공항철도 연결)
```

**서울 주요 지하철 노선 (게임 내 구현):**

| 노선 | 색상 | 주요역 (게임 관련) |
|------|------|-----------------|
| **2호선** (순환) | 초록 | 홍대입구, 신촌, 이대, 시청, 을지로, 성수, 강남, 삼성(코엑스), 서울대입구 |
| **4호선** | 하늘 | 명동, 동대문, 서울역 |
| **6호선** | 갈색 | 망원, 합정 |
| **AREX** (공항철도) | 주황 | 인천공항T1→T2→...→홍대입구→공덕→서울역 |

**Ch.1 초급 회화반 장소 (코스순):**

| 과 | 장소 | 최근접 역 | 노선 |
|----|------|----------|------|
| 1과 | 인천공항 | 인천공항역 | AREX |
| 2과 | 지하철·버스 | (서울 전역) | 2호선 |
| 3과 | 택시·길찾기 | (이동중) | — |
| 4과 | 하이커그라운드 | 종각역 | 1호선 |
| 5과 | 명동 올리브영 | 명동역 | 4호선 |
| 6과 | 한국 음식점 (삼겹살) | 강남역 | 2호선 |
| 7과 | BTS 성지순례 | 강남/학동 | 2호선 |
| 8과 | 강남 K-Star Road | 강남역 | 2호선 |
| 9과 | 성수동·홍대 | 성수역/홍대입구역 | 2호선 |
| 10과 | 숙소·귀국 | 인천공항역 | AREX |

---

## 3. 씬(Scene) 아키텍처

### 3-A. 새로 만들 씬 클래스

```
src/scenes/
├── BaseWorldScene.js          (기존 — 워커블 월드 베이스)
├── BasePlaceScene.js          ★NEW — 실내/장소 워커블 베이스 (800×600)
├── BaseMapUIScene.js          ★NEW — UI 선택 화면 베이스 (광역맵/국제맵)
│
├── InternationalMapScene.js   ★NEW — 국제맵 (공항 선택)
│
├── FukuokaMetroScene.js       ★NEW — 후쿠오카 광역맵 (지하철 노선도)
├── SeoulMetroScene.js         ★NEW — 서울 광역맵 (지하철 노선도)
│
├── fukuoka/                   ★NEW 디렉토리
│   ├── FukuokaYakuinScene.js  — Ch.0 메인 지역맵 (기존 FukuokaScene 리팩터)
│   ├── FukuokaAirportScene.js — 후쿠오카공항 지역맵
│   ├── YukoHouseScene.js      — 유코 집 장소맵
│   ├── AmiHouseScene.js       — 아미 집 장소맵
│   ├── RuiHouseScene.js       — 루이 집 장소맵
│   ├── BookstoreScene.js      — 서점 장소맵
│   └── KoreanAcademyScene.js  — 한국어 학원 장소맵
│
├── incheon/                   ★NEW 디렉토리
│   └── IncheonAirportScene.js — 인천공항 지역맵 (기존 IncheonScene 리팩터)
│
├── seoul/                     ★NEW 디렉토리
│   ├── SeoulMyeongdongScene.js    — 명동 지역맵
│   ├── SeoulGangnamScene.js       — 강남 지역맵
│   ├── SeoulHongdaeScene.js       — 홍대 지역맵
│   ├── SeoulSeongsuScene.js       — 성수동 지역맵
│   ├── SeoulNamsanScene.js        — 남산 지역맵
│   ├── OliveYoungScene.js         — 올리브영 장소맵
│   ├── RestaurantScene.js         — 한국 식당 장소맵
│   ├── HiKRGroundScene.js         — 하이커그라운드 장소맵
│   └── HotelScene.js              — 숙소 장소맵
│
├── BootScene.js               (기존 — 텍스처 추가 필요)
├── TitleScene.js              (기존)
├── ChapterSelectScene.js      (기존)
├── DialogueScene.js           (기존)
├── MissionScene.js            (기존)
├── VocabularyScene.js         (기존)
└── ShopScene.js               (기존)
```

### 3-B. 베이스 클래스 설계

**BaseMapUIScene** (국제맵/광역맵 공통 베이스):
- 워커블이 아닌 **UI 선택 화면**
- 배경에 실제 지도 윤곽을 프로시저럴로 렌더링
- 노드(역/공항)를 원형 버튼으로 배치, 터치/클릭으로 선택
- 선택 시 확인 팝업 → 전환 애니메이션 → `scene.start(targetScene)`
- 레벨 게이팅: 잠긴 역/공항은 자물쇠 표시
- 현재 위치 표시 (깜빡이는 핑크 점)

**BasePlaceScene** (장소맵 베이스):
- BaseWorldScene 상속하되 작은 월드 크기 (800×600 또는 640×480)
- 실내용 타일 (tile_floor, tile_wall 등)
- 출구 포털 → 원래 지역맵으로 복귀
- NPC/미션/대화 시스템 그대로 사용
- 미니맵 비활성화 (실내라 불필요)
- 카메라 줌 고정 (1.0)

### 3-C. 이동 시스템 (Navigation Flow)

```javascript
// 지역맵 → 지하철역 진입
createSubwayEntrance(x, y, metroSceneKey, stationId) {
  // 지하철역 건물 + 상호작용 존
  // 상호작용 시: gameState.lastStation = stationId
  // scene.start(metroSceneKey, { fromStation: stationId })
}

// 광역맵 → 역 선택 → 지역맵
// MetroMapScene에서 역 노드 클릭 시:
onStationSelected(stationConfig) {
  // scene.start(stationConfig.targetScene, { fromStation: stationConfig.id })
}

// 지역맵 → 건물 진입 → 장소맵
createEnterableBuilding(x, y, placeSceneKey, config) {
  // 건물 + 상호작용 존
  // 상호작용 시: scene.start(placeSceneKey, { returnScene: this.scene.key })
}

// 장소맵 → 출구 → 지역맵 복귀
createExit(x, y, returnSceneKey) {
  // 문/출구 포털
  // scene.start(returnSceneKey, { fromPlace: this.scene.key })
}
```

---

## 4. 광역맵 (MetroMapScene) 상세 설계

### 4-A. 후쿠오카 광역맵

**실제 지하철 노선도 기반 UI:**
- 캔버스 크기: 전체 뷰포트
- 배경: 후쿠오카만(하카타만) 해안선 윤곽을 Phaser Graphics로 그림
  - 북쪽 해안선 커브, 남쪽은 내륙
  - 반투명 다크 배경 위에 밝은 노선
- 노선:
  - 공항선(주황): 좌→우 직선에 가까운 커브
  - 하코자키선(파랑): 나카스에서 북동쪽으로 분기
  - 나나쿠마선(녹색): 남서에서 중앙으로 종단
- 역 노드: 원형 버튼 (터치 최소 44×44px)
- 환승역 표시: 이중 원형 (텐진/나카스카와바타/하카타)
- 게임에 필요한 역만 활성화, 나머지는 회색 비활성

**활성 역 (Ch.0):**
| 역명 | 노선 | 연결 지역맵 | 잠금조건 |
|------|------|-----------|---------|
| 야쿠인 | 나나쿠마선 | FukuokaYakuinScene | 없음 (시작지) |
| 텐진 | 공항선 | (미래 확장) | Lv.2+ |
| 하카타 | 공항선 | (미래 확장) | Lv.2+ |
| 후쿠오카공항 | 공항선 | FukuokaAirportScene | Lv.1+ |

### 4-B. 서울 광역맵

**실제 서울 지하철 노선도 기반 UI:**
- 배경: 한강 윤곽선을 수평으로 그림 (서→동), 강북/강남 구분
- 서울 외곽선 (산지·경계) 반투명 표시
- 노선:
  - 2호선(초록): 순환선 — 서울 중심부를 돌아감
  - 4호선(하늘): 종단선 — 서울역~명동
  - 6호선(갈색): 망원~합정 구간
  - AREX(주황): 인천공항~서울역 (점선으로 서쪽 연장)
- 역 노드: 원형 버튼 (최소 44×44px)

**활성 역 (Ch.1):**
| 역명 | 노선 | 연결 지역맵 | 잠금조건 |
|------|------|-----------|---------|
| 인천공항 | AREX | IncheonAirportScene | 없음 |
| 홍대입구 | 2호선/AREX | SeoulHongdaeScene | Lv.4+ |
| 명동 | 4호선 | SeoulMyeongdongScene | Lv.4+ |
| 종각 (하이커) | 1호선 | (미래) | Lv.5+ |
| 강남 | 2호선 | SeoulGangnamScene | Lv.5+ |
| 성수 | 2호선 | SeoulSeongsuScene | Lv.6+ |
| 망원 | 6호선 | (미래 Ch.3) | Lv.9+ |

---

## 5. 국제맵 (InternationalMapScene) 상세 설계

**UI 구성:**
- 배경: 동아시아 지도 윤곽 (한반도 + 일본 규슈)
  - Phaser Graphics로 한반도·큐슈 해안선 실루엣 렌더링
  - 바다 = 진한 남색, 육지 = 반투명 다크
- 공항 노드:
  - 후쿠오카공항 (FUK): 규슈 북부 위치에 ✈ 아이콘
  - 인천공항 (ICN): 서울 서쪽 인천 영종도 위치에 ✈ 아이콘
- 비행 경로: 두 공항 사이 점선 곡선 (호)
- 선택 시: 비행기 애니메이션 → 목적지 공항 지역맵으로 전환
- 레벨 게이팅: Ch.0 완료 전에는 인천공항 잠금

**인터랙션:**
1. 공항 노드 터치/클릭
2. 확인 팝업: "인천공항으로 이동하시겠습니까? / 仁川空港へ移動しますか？"
3. 확인 → 비행기 이동 애니메이션 (1.5초)
4. 도착 공항 지역맵으로 scene.start()

---

## 6. 지역맵 상세 설계 (Ch.0 + Ch.1 우선)

### 6-A. 후쿠오카 야쿠인 지역맵 (Ch.0 메인)

**실제 지리 기반 레이아웃 (2400×1800 월드):**
- 야쿠인 지역의 실제 거리 구조 반영
- 북쪽: 텐진 방면 (도로)
- 남쪽: 주택가 (유코·아미·루이 집)
- 중앙: 상업지역 (편의점, 서점)
- 서쪽: 한국어 학원 방면
- 동남쪽: 야쿠인역 (지하철 진입점)

**배치:**
| 건물 | 좌표 (예상) | 상호작용 |
|------|-----------|---------|
| 유코 집 | (400, 1400) | → YukoHouseScene |
| 아미 집 | (700, 1300) | → AmiHouseScene |
| 루이 집 | (1000, 1400) | → RuiHouseScene |
| 서점 (키노쿠니야) | (1600, 600) | → BookstoreScene |
| 한국어 학원 | (500, 700) | → KoreanAcademyScene |
| 편의점 | (1200, 900) | 대화 NPC |
| 야쿠인역 🚇 | (1800, 1200) | → FukuokaMetroScene |

**타일맵:** 실제 거리 패턴 반영
- 주요 도로: tile_road (동서/남북 격자)
- 주택가: tile_grass + 건물들
- 상업가: tile_road 밀집

### 6-B. 후쿠오카공항 지역맵

**공식 플로어맵 기반 (1600×1200 월드):**
- 국제선 터미널 1F(도착층) 레이아웃 기반
- 왼쪽: 도착 게이트(입국), 오른쪽: 버스터미널
- 중앙: 안내소, 환전소, 편의점
- 위쪽 계단/엘리베이터: 3F 출발층(국제선 탑승구역)으로 이동 → 국제맵
- 아래쪽: B2F 지하철역으로 이동 → 후쿠오카 광역맵

**특수 타일:** tile_airport_floor (공항 바닥), tile_wall

### 6-C. 인천공항 지역맵 (Ch.1 시작)

**공식 홈페이지 T1 1F 도착층 기반 (2000×1200 월드):**
- 입국장 A~F 게이트 배치 → 좌→우로 펼침
- NPC 배치:
  - 이현정 (입국심사): 입국장 중앙
  - 환전소 NPC: 4번 출입구 부근
  - T-money 판매: 교통센터 부근
  - 김유석: 도착로비
- B1F 공항철도 대합실 → 서울 광역맵 진입점
- 3F 출발층 → 국제맵 진입점 (엘리베이터/에스컬레이터)

### 6-D. 서울 지역맵들 (Ch.1)

각 지역맵은 해당 지역의 실제 거리 구조를 반영하여 1600×1200~2400×1800 크기로 제작:

**명동 (SeoulMyeongdongScene):**
- 명동길 직선 도로 중심
- 올리브영 명동 플래그십 → OliveYoungScene
- 쇼핑 거리 NPC들
- 명동역 🚇 (남쪽)

**강남 (SeoulGangnamScene):**
- 강남대로 + K-Star Road
- 코엑스 건물 → (미래 장소맵)
- 삼겹살 식당 → RestaurantScene
- 강남역 🚇 (중앙)

**홍대 (SeoulHongdaeScene):**
- 홍대 걷고싶은거리 구조
- 버스킹 NPC, 벽화
- 홍대입구역 🚇

**성수동 (SeoulSeongsuScene):**
- 성수동 카페거리
- 팝업스토어
- 성수역 🚇

**남산 (SeoulNamsanScene):**
- 케이블카 + 등산로
- N서울타워 전망대
- (명동에서 도보 연결 또는 버스)

---

## 7. 장소맵 (BasePlaceScene) 설계

**공통 사양:**
- 월드 크기: 800×600 (작은 실내)
- 타일: tile_floor (나무/타일), tile_wall (벽)
- 출구 문: 화면 하단 → 원래 지역맵 복귀
- NPC + 미션/대화 시스템 그대로 사용
- 미니맵: 비활성화
- HUD: 그대로 유지

**Ch.0 장소맵:**
| 장소 | 크기 | 주요 내용 |
|------|------|----------|
| 유코 집 | 800×600 | 방, K-POP 포스터, 한국어 교재 |
| 아미 집 | 800×600 | 뷰티 용품, BTS 굿즈 |
| 루이 집 | 800×600 | 카메라 장비, 한국 음식 포스터 |
| 서점 | 1000×600 | 책장들, 한국어 코너, 서점 직원 NPC |
| 한국어 학원 | 1000×800 | 교실, 칠판, 한국어 선생님 NPC |

**Ch.1 장소맵:**
| 장소 | 크기 | 주요 내용 |
|------|------|----------|
| 올리브영 | 1000×600 | 화장품 진열대, 직원 NPC |
| 한국 식당 | 800×600 | 테이블, 메뉴판, 삼겹살 굽기 |
| 하이커그라운드 | 1000×800 | K-POP 체험존, 직원 NPC |
| 숙소 | 800×600 | 호텔방, 프론트 |

---

## 8. 새로 필요한 프로시저럴 텍스처 (BootScene)

### 타일 텍스처 (32×32)
| 이름 | 색상 | 용도 |
|------|------|------|
| `tile_floor_wood` | #8B6914 | 실내 나무 바닥 |
| `tile_floor_tile` | #C8C8C8 | 실내 타일 바닥 |
| `tile_airport_floor` | #D4D4D4 | 공항 바닥 |
| `tile_wall` | #555555 | 벽 |
| `tile_sidewalk` | #AAAAAA | 인도 |

### 건물 텍스처
| 이름 | 크기 | 색상 | 용도 |
|------|------|------|------|
| `building_subway` | 72×56 | #2E8B57 | 지하철역 입구 |
| `building_restaurant` | 64×48 | #CD5C5C | 음식점 |
| `building_cafe` | 56×48 | #8B4513 | 카페 |
| `building_hospital` | 72×56 | #FFFFFF + 적십자 | 병원 |
| `building_police` | 64×48 | #4169E1 | 경찰서 |
| `building_cinema` | 72×56 | #8B0000 | 영화관 |
| `building_oliveyoung` | 64×48 | #00A651 (OY 그린) | 올리브영 |
| `building_tower` | 48×80 | #FF4500 | N서울타워 |
| `building_departure` | 80×56 | #4682B4 | 국제선 탑승구 |

### UI 텍스처
| 이름 | 크기 | 용도 |
|------|------|------|
| `icon_subway` | 24×24 | 지하철 마크 🚇 |
| `icon_airplane` | 24×24 | 비행기 아이콘 ✈ |
| `icon_exit` | 24×24 | 출구 화살표 |
| `node_station` | 32×32 | 광역맵 역 노드 |
| `node_airport` | 40×40 | 국제맵 공항 노드 |

---

## 9. 데이터 파일 구조

```
public/data/
├── maps/
│   ├── fukuoka_metro.json      — 후쿠오카 지하철 노선·역 데이터
│   ├── seoul_metro.json        — 서울 지하철 노선·역 데이터
│   ├── international.json      — 국제맵 공항 노드 데이터
│   ├── fukuoka_yakuin.json     — 야쿠인 지역맵 건물·NPC 배치
│   ├── fukuoka_airport.json    — 후쿠오카공항 배치
│   ├── incheon_airport.json    — 인천공항 배치
│   ├── seoul_myeongdong.json   — 명동 배치
│   ├── seoul_gangnam.json      — 강남 배치
│   ├── seoul_hongdae.json      — 홍대 배치
│   ├── seoul_seongsu.json      — 성수동 배치
│   └── seoul_namsan.json       — 남산 배치
├── places/
│   ├── yuko_house.json         — 유코 집 배치
│   ├── ami_house.json          — 아미 집 배치
│   ├── rui_house.json          — 루이 집 배치
│   ├── bookstore.json          — 서점 배치
│   ├── korean_academy.json     — 한국어 학원 배치
│   ├── olive_young.json        — 올리브영 배치
│   ├── restaurant.json         — 한국 식당 배치
│   └── hikr_ground.json        — 하이커그라운드 배치
└── (기존 chapters/, dialogues/, missions/, vocabulary/, shop/ 유지)
```

**광역맵 데이터 예시 (seoul_metro.json):**
```json
{
  "region": "seoul",
  "name_ko": "서울 지하철",
  "name_ja": "ソウル地下鉄",
  "outline": [ [x1,y1], [x2,y2], ... ],  // 서울 외곽선 좌표
  "hanRiver": [ [x1,y1], [x2,y2], ... ], // 한강 곡선 좌표
  "lines": [
    {
      "id": "line2", "color": "#33A23D", "name": "2호선",
      "stations": [
        { "id": "hongdae", "name_ko": "홍대입구", "x": 180, "y": 280,
          "targetScene": "SeoulHongdaeScene", "unlockLevel": 4 },
        { "id": "seongsu", "name_ko": "성수", "x": 620, "y": 300,
          "targetScene": "SeoulSeongsuScene", "unlockLevel": 6 }
      ],
      "path": [ [x,y], ... ]  // 노선 곡선 좌표
    }
  ]
}
```

---

## 10. GameState 확장

```javascript
// src/systems/GameState.js 에 추가할 필드:
{
  currentRegion: 'fukuoka',        // 'fukuoka' | 'seoul'
  currentMap: 'fukuoka_yakuin',     // 현재 위치 맵 ID
  lastStation: 'yakuin',            // 마지막 이용 역 (광역맵 복귀 시 표시)
  visitedMaps: ['fukuoka_yakuin'],  // 방문한 맵 목록
  unlockedStations: ['yakuin', 'fukuoka_airport'],  // 해금된 역 목록
}
```

---

## 11. 수정이 필요한 기존 파일

| 파일 | 변경 내용 |
|------|----------|
| `src/main.js` | 새로운 씬들 import 및 등록 |
| `src/scenes/BootScene.js` | 새 텍스처 생성 + 맵 데이터 프리로드 |
| `src/scenes/BaseWorldScene.js` | `createSubwayEntrance()`, `createEnterableBuilding()` 메서드 추가, `init(data)` 메서드로 스폰 위치 받기 |
| `src/scenes/FukuokaScene.js` | → `fukuoka/FukuokaYakuinScene.js`로 리팩터 (기존 코드 기반) |
| `src/scenes/IncheonScene.js` | → `incheon/IncheonAirportScene.js`로 리팩터 |
| `src/systems/GameState.js` | 새 필드 추가 (currentRegion, currentMap, lastStation 등) |
| `src/systems/DataLoader.js` | `loadMapConfig()`, `loadPlaceConfig()` 메서드 추가 |
| `src/scenes/TitleScene.js` | 게임 시작 시 currentMap 기반으로 올바른 씬 진입 |
| `src/constants.js` | 새 상수 (맵 크기, 장소 크기 등) |

---

## 12. 구현 순서 (Phase 기반)

### Phase 1: 기반 인프라 (1-2일)
1. `BaseMapUIScene.js` 작성 (UI 선택 화면 베이스)
2. `BasePlaceScene.js` 작성 (실내 장소 베이스)
3. `GameState.js` 확장 (currentRegion, currentMap, lastStation)
4. `DataLoader.js` 확장 (loadMapConfig, loadPlaceConfig)
5. `BootScene.js` 새 텍스처 추가
6. `BaseWorldScene.js`에 `createSubwayEntrance()`, `createEnterableBuilding()` 추가
7. `constants.js` 새 상수 추가

### Phase 2: 후쿠오카 Ch.0 맵 완성 (2-3일)
1. `FukuokaScene.js` → `fukuoka/FukuokaYakuinScene.js` 리팩터
2. `FukuokaMetroScene.js` (후쿠오카 광역맵)
3. `FukuokaAirportScene.js` (후쿠오카공항)
4. Ch.0 장소맵들 (유코집, 아미집, 루이집, 서점, 학원)
5. 맵 데이터 JSON 작성

### Phase 3: 인천공항 + 서울 Ch.1 맵 (3-4일)
1. `IncheonScene.js` → `incheon/IncheonAirportScene.js` 리팩터
2. `SeoulMetroScene.js` (서울 광역맵)
3. `InternationalMapScene.js` (국제맵)
4. 서울 지역맵들 (명동, 강남, 홍대, 성수동, 남산)
5. Ch.1 장소맵들 (올리브영, 식당, 하이커그라운드, 숙소)
6. 맵 데이터 JSON 작성

### Phase 4: 통합 테스트 + 연결 (1일)
1. `main.js` 씬 등록
2. `TitleScene.js` 시작점 로직 수정
3. 전체 이동 흐름 테스트
4. 모바일 해상도 테스트 (375×812)
5. 태블릿 (768×1024) + 데스크톱 (1280×800) 테스트

---

## 13. 검증 방법

1. **이동 흐름 테스트:**
   - 후쿠오카 야쿠인 → 야쿠인역 → 광역맵 → 공항역 → 공항 → 국제선 → 국제맵 → 인천공항 → 공항철도 → 서울 광역맵 → 명동역 → 명동 지역맵 → 올리브영
   - 역방향도 테스트

2. **모바일 호환성:**
   - 375×812: 모든 터치 타겟 44px 이상
   - 광역맵/국제맵 역 노드 탭 정상 동작
   - 조이스틱으로 지역맵/장소맵 이동

3. **레벨 게이팅:**
   - 잠긴 역/공항 탭 시 잠금 메시지 표시
   - 레벨 달성 시 해금 확인

4. **데이터 연동:**
   - 각 지역맵의 NPC가 올바른 챕터/레슨의 미션/대화 데이터 로드
   - 게임 저장/로드 시 현재 맵 위치 복원

5. **콘솔 에러 0건**
